<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>The Page Rank Algorithm</title>

  <meta property="description" itemprop="description" content="Google&#39;s Page Rank Algorithm was an early tool that helped determine the&#10;relevance of search results.&#10;&#10;How does the algorithm work? How can we implement the algorithm?&#10;&#10;In this post, we investigate the mathematics behind the Page Rank algorithm and&#10;implement several different methods for obtaining results using R."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-01-22"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-01-22"/>
  <meta name="article:author" content="Logan Lossing"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="The Page Rank Algorithm"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Google&#39;s Page Rank Algorithm was an early tool that helped determine the&#10;relevance of search results.&#10;&#10;How does the algorithm work? How can we implement the algorithm?&#10;&#10;In this post, we investigate the mathematics behind the Page Rank algorithm and&#10;implement several different methods for obtaining results using R."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="The Page Rank Algorithm"/>
  <meta property="twitter:description" content="Google&#39;s Page Rank Algorithm was an early tool that helped determine the&#10;relevance of search results.&#10;&#10;How does the algorithm work? How can we implement the algorithm?&#10;&#10;In this post, we investigate the mathematics behind the Page Rank algorithm and&#10;implement several different methods for obtaining results using R."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","tags","categories","output"]}},"value":[{"type":"character","attributes":{},"value":["The Page Rank Algorithm"]},{"type":"character","attributes":{},"value":["Google's Page Rank Algorithm was an early tool that helped determine the\nrelevance of search results.\n\nHow does the algorithm work? How can we implement the algorithm?\n\nIn this post, we investigate the mathematics behind the Page Rank algorithm and\nimplement several different methods for obtaining results using R.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Logan Lossing"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":[]}},"value":[]}]}]},{"type":"character","attributes":{},"value":["01-22-2021"]},{"type":"character","attributes":{},"value":["probability","R","linear algebra"]},{"type":"character","attributes":{},"value":["R","linear algebra","probability"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","code_folding","toc","toc_depth","number_sections"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["stat-ncsu/A.txt","stat-ncsu/U.txt","the-page-rank-algorithm_files/anchor-4.2.2/anchor.min.js","the-page-rank-algorithm_files/bowser-1.9.3/bowser.min.js","the-page-rank-algorithm_files/distill-2.2.21/template.v2.js","the-page-rank-algorithm_files/figure-html5/MakePlot-1.png","the-page-rank-algorithm_files/header-attrs-2.6.6/header-attrs.js","the-page-rank-algorithm_files/jquery-1.11.3/jquery.min.js","the-page-rank-algorithm_files/popper-2.6.0/popper.min.js","the-page-rank-algorithm_files/tippy-6.2.7/tippy-bundle.umd.min.js","the-page-rank-algorithm_files/tippy-6.2.7/tippy-light-border.css","the-page-rank-algorithm_files/tippy-6.2.7/tippy.css","the-page-rank-algorithm_files/tippy-6.2.7/tippy.umd.min.js","the-page-rank-algorithm_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="the-page-rank-algorithm_files/header-attrs-2.6.6/header-attrs.js"></script>
  <script src="the-page-rank-algorithm_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="the-page-rank-algorithm_files/popper-2.6.0/popper.min.js"></script>
  <link href="the-page-rank-algorithm_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="the-page-rank-algorithm_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="the-page-rank-algorithm_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="the-page-rank-algorithm_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="the-page-rank-algorithm_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="the-page-rank-algorithm_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="the-page-rank-algorithm_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"The Page Rank Algorithm","description":"Google's Page Rank Algorithm was an early tool that helped determine the\nrelevance of search results.\n\nHow does the algorithm work? How can we implement the algorithm?\n\nIn this post, we investigate the mathematics behind the Page Rank algorithm and\nimplement several different methods for obtaining results using R.","authors":[{"author":"Logan Lossing","authorURL":{},"affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-01-22T00:00:00.000+00:00","citationText":"Lossing, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>The Page Rank Algorithm</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">R</div>
<div class="dt=tag">linear algebra</div>
<div class="dt=tag">probability</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Google’s Page Rank Algorithm was an early tool that helped determine the relevance of search results.</p>
<p>How does the algorithm work? How can we implement the algorithm?</p>
<p>In this post, we investigate the mathematics behind the Page Rank algorithm and implement several different methods for obtaining results using R.</p></p>
</div>

<div class="d-byline">
  Logan Lossing true 
  
<br/>01-22-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#the-page-rank-problem-an-exploration">The Page Rank Problem: An Exploration</a>
<ul>
<li><a href="#summary-statistics-of-the-ncsu-data">Summary Statistics of the NCSU Data</a></li>
</ul></li>
<li><a href="#solving-the-page-rank-problem">Solving the Page Rank Problem</a>
<ul>
<li><a href="#using-a-dense-linear-system-solver">Using a Dense Linear System Solver</a></li>
<li><a href="#using-a-simple-iterative-linear-system-solver">Using a Simple Iterative Linear System Solver</a></li>
<li><a href="#using-a-dense-eigen-solver">Using a Dense Eigen-Solver</a></li>
<li><a href="#using-a-simple-iterative-eigen-solver">Using a Simple Iterative Eigen-Solver</a></li>
</ul></li>
<li><a href="#the-results">The Results</a>
<ul>
<li><a href="#extension-of-this-analysis-to-the-entire-internet">Extension of this Analysis to the Entire Internet</a></li>
</ul></li>
</ul>
</nav>
</div>
<p><strong>Originally published in 2014</strong></p>
<h1 id="the-page-rank-problem-an-exploration">The Page Rank Problem: An Exploration</h1>
<p>When searching for a particular keyword on the internet, we want our search engine to return "relevant" websites. There are many possible ways of defining what we mean by relevant, but the one that the Google founders came up with in the 1990’s was the Page Rank method.</p>
<p>The crux of the idea of the Page Rank method is that the "importance" of a particular web-page can be defined to be the number of web-pages that link to it. The authors at <a href="http://www.math.cornell.edu/~mec/Winter2009/RalucaRemus/Lecture3/lecture3.html" class="uri">http://www.math.cornell.edu/~mec/Winter2009/RalucaRemus/Lecture3/lecture3.html</a> did a great job in explaining what this means, and I borrow their explanation here.</p>
<blockquote>
<p>"If we create a web page i and include a hyperlink to the web page j, this means that we consider j important and relevant for our topic. If there are a lot of pages that link to j, this means that the common belief is that page j is important. If on the other hand, j has only one backlink, but that comes from an authoritative site k, (like www.google.com, www.cnn.com, www.cornell.edu) we say that k transfers its authority to j; in other words, k asserts that j is important. Whether we talk about popularity or authority, we can iteratively assign a rank to each web page, based on the ranks of the pages that point to it."</p>
<p>- Cornell Math Explorers Club Website</p>
</blockquote>
<p>Using this idea of importance, we can turn a directed graph, one that represents the network structure of webpages (nodes are websites, edges are links), into a transition matrix for a Markov Chain. Then we can think of the most "relevant" websites as those with the highest probabilities in the stationary distribution of the Markov Chain.</p>
<p>There are, however, two issues that we need to adjust for. The first is that our graph may not be fully connected. That is, we are not guaranteed that a path exists to every website from every other website. This causes us to get stuck in one part of the graph and not be able to assess the importance of other parts of the graph. The second issue is “dangling nodes," websites that have links to them but they do not link anywhere else. In order to adjust for this, we have the idea of a”random surfer."</p>
<p>A "random surfer" is an entity that will randomly surf around the graph according to some basic rules. Let <span class="math inline">\(r_{i}\)</span> be the out degree of webpage i. The out degree of a webpages is defined to be the number of webpages that it links to. When arriving to webpage i then they do one of the following things:</p>
<ol type="1">
<li><p>If <span class="math inline">\(r_{i} &gt; 0\)</span> then with probability p they uniformly chose a link on that page and with probability 1-p they choose a link uniformly from the space of n-pages</p></li>
<li><p>If <span class="math inline">\(r_{i} = 0\)</span> then they choose a random page uniformly from the space of n-pages</p></li>
</ol>
<p>We can notate this as follows.</p>
<ol type="1">
<li><p>Let A be an (nxn) adjacency matrix where <span class="math inline">\(a_{ij} = \mathbb{1}(\text{webpage i links to webpage j})\)</span></p></li>
<li><p>Define p to be the probability that a random surfer follows a link on the current page (1-p is called the "teleportation" parameter)</p></li>
<li><p><span class="math inline">\(r_{i}\)</span> be the out degree of webpage i. The out degree of a webpages is defined to be the number of webpages that it links to</p></li>
<li><p>The transition matrix P has entries <span class="math inline">\(p_{ij} = \mathbb{1}(r_{i}&gt;0)\Big (\frac{pa_{ij}}{r_{i}} \Big ) + \mathbb{1}(r_{i}=0) \Big ( \frac{1-p}{n} \Big )\)</span></p></li>
</ol>
<p>In matrix form, this can be written as:</p>
<p><span class="math display">\[P = pR^{+}A + z1_{n}^T\]</span></p>
<p>where, <span class="math inline">\(R = \text{diag}(r_{1},...,r_{n})\)</span> and <span class="math inline">\(z_{j} = \mathbb{1}(r_{i}&gt;0)(\frac{1-p}{n}) + \mathbb{1}(r_{i}=0)(\frac{1}{n})\)</span></p>
<p>Given this Markov Chain setup, we can find the stationary distribution which corresponds to the ranks (probabilities) of each page.</p>
<p>It turns out that P is a positive row stochastic matrix and thus <span class="math inline">\(P^T\)</span> is column stochastic. The Perron-Frobenius Theorem guarantees that any column stochastic matrix has the following properties:</p>
<ol type="1">
<li><p>1 is an eigenvalue of multiplicity one</p></li>
<li><p>1 is the largest eigenvalue, all others are smaller in modulus</p></li>
<li><p>There exists a unique eigenvector corresponding to 1 that has all positive entries and sums to 1</p></li>
</ol>
<p>This theorem thus gives us a few interesting ways to look at this problem, yielding several possible methods of solution.</p>
<p>The first way to think about this is as an eigen-problem. We want to find the eigenvector corresponding to eigenvalue 1. Since this eigenvalue is multiplicity one then there is only one such eigenvector (up to a constant). That is, we want to find x such that <span class="math inline">\(P^Tx = x\)</span>. There are many possible ways to solve such and eigen-problem such as Singular-Value Decomposition(SVD) or iteratively using the Power-Method.</p>
<p>The second way to think about this problem is as a linear system of equations. <span class="math inline">\(P^Tx = x \iff (I-P^T)x = 0\)</span>. We can solve such a linear system using ... or iteratively using the Jacobi Method, Gauss-Seidel, or Bi-Conjugate Gradient Methods.</p>
<p>In the rest of this document we explore these different methods of solving the Page Rank Problem using a data set of 500 webpages connected to the <a href="www.stat.ncsu.edu">www.stat.ncsu.edu</a> webpage. (Go Wolfpack!)</p>
<h2 id="summary-statistics-of-the-ncsu-data">Summary Statistics of the NCSU Data</h2>
<p>The <a href="https://github.com/nagol/nagol.github.io/blob/master/content/post/stat-ncsu/A.txt">A.txt</a> data set is a (500x500) adjacency matrix of the top 500 web-pages linking to the <a href="www.stat.ncsu.edu">www.stat.ncsu.edu</a> website.</p>
<ol type="1">
<li><p>The total number of edges is equal to <span class="math inline">\(\sum_{i}{\sum_{j}{a_{ij}}} = 14,102\)</span>.</p></li>
<li><p>The out degree of the matrix is <span class="math inline">\(r_{i} = \sum_{j}{a_{ij}}\)</span>. The max out degree was 126, and the min was 0.</p></li>
<li><p>There were 97 dangling nodes.</p></li>
</ol>
<p>These calculations were performed with the following code:</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>adj.matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='va'>path_to_dataA</span>,header<span class='op'>=</span><span class='cn'>FALSE</span>,sep <span class='op'>=</span> <span class='st'>","</span><span class='op'>)</span>
<span class='va'>labels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='va'>path_to_dataU</span>,header<span class='op'>=</span><span class='cn'>FALSE</span>,sep <span class='op'>=</span> <span class='st'>","</span>,as.is<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>adj.matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>adj.matrix</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>labels</span><span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>labels</span><span class='op'>)</span>

<span class='op'>(</span><span class='va'>number.of.pages</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>adj.matrix</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 500</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>number.of.edges</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>adj.matrix</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 14102</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>##  ri- the out degree = sum_j (Aij)</span>
<span class='va'>out.degree</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>adj.matrix</span>,<span class='fl'>1</span>,<span class='va'>sum</span><span class='op'>)</span>
<span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>out.degree</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>out.degree</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 126</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>number.of.dangling.nodes</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>out.degree</span><span class='op'>==</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 97</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>in.degree</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>adj.matrix</span>,<span class='fl'>2</span>,<span class='va'>sum</span><span class='op'>)</span>
<span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>in.degree</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 268</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>in.degree</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1</code></pre>
</div>
<p>Let’s quickly take a second to look at the sparsity pattern in the adjacency matrix. This is accomplished using the function <em>fields::image.plot()</em> from the "fields" package. The code to make this plot is below.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="the-page-rank-algorithm_files/figure-html5/MakePlot-1.png" width="624" /></p>
</div>
<p>We can see that the majority of the matrix is zeros, thus this is a sparse matrix. This structure can be exploited to speed up the solving of this system. We also see that many pages have nearly identical linking structures.</p>
<h1 id="solving-the-page-rank-problem">Solving the Page Rank Problem</h1>
<p>For the analyses that follow, we set the "teleportation" parameter to be .15, thus p=.85 The first few methods of solution will look at the problem from the perspective of a linear system, the second as an eigen-problem.</p>
<p>Before preceding, we need to read-in/create all the necessary variables and matrices. This is handled in the output below.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="using-a-dense-linear-system-solver">Using a Dense Linear System Solver</h2>
<p>We are trying solve the linear equation <span class="math inline">\((I-P^T)x = 0\)</span>, thus <span class="math inline">\(x \in \mathcal{N}(I-P^T)\)</span>. The Perron-Frobenius Theorem guarantees that there is a single vector in the <span class="math inline">\(\mathcal{N}(I-P^T)\)</span>, thus we need not worry about uniqueness. QR decomposition is going to make solving this system very easy.</p>
<p>If we perform a QR decomposition on <span class="math inline">\((I-P^T)^T\)</span> with rank r, then the first r columns form an orthonormal basis for the column space of <span class="math inline">\((I-P^T)^T\)</span> while the remaining n-r columns form an orthonormal basis for the null space of <span class="math inline">\((I-P^T)\)</span>. Since <span class="math inline">\((I-P^T)^T\)</span> is only rank deficient by one, the last column of Q, when properly normalized, will be our solution.</p>
<p>Below is my implementation of this method and the first five elements of my solution vector.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>qr.i.minus.ptt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/qr.html'>qr</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>i.minus.pt</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>Q</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/qraux.html'>qr.Q</a></span><span class='op'>(</span><span class='va'>qr.i.minus.ptt</span><span class='op'>)</span>
<span class='va'>solution.qr</span> <span class='op'>&lt;-</span> <span class='va'>Q</span><span class='op'>[</span>,<span class='fl'>500</span><span class='op'>]</span>
<span class='va'>solution.qr</span> <span class='op'>&lt;-</span> <span class='va'>solution.qr</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>solution.qr</span><span class='op'>)</span>
<span class='va'>solution.qr</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.002136784 0.235939467 0.010670053 0.005944397 0.006703392</code></pre>
</div>
<p>A very similar method to solving this problem in almost the exact same fashion, would be to use the <em>svd()</em> function. Singular-Value Decomposition also allows us to find a basis for the null space of <span class="math inline">\((I-P^T)^T\)</span>, and this can be accomplished with the following code.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>svd.P</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/svd.html'>svd</a></span><span class='op'>(</span><span class='va'>i.minus.pt</span><span class='op'>)</span>
<span class='va'>solution.svd</span> <span class='op'>&lt;-</span> <span class='va'>svd.P</span><span class='op'>$</span><span class='va'>v</span><span class='op'>[</span>,<span class='fl'>500</span>,drop<span class='op'>=</span><span class='cn'>F</span><span class='op'>]</span>
<span class='va'>solution.svd</span> <span class='op'>&lt;-</span> <span class='va'>solution.svd</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>solution.svd</span><span class='op'>)</span>
<span class='va'>solution.svd</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.002136784 0.235939467 0.010670053 0.005944397 0.006703392</code></pre>
</div>
<h2 id="using-a-simple-iterative-linear-system-solver">Using a Simple Iterative Linear System Solver</h2>
<p>Now we want to solve for the same vector as before, using an iterative solver. A very straight-forward method for doing this is the Jacobi method.</p>
<p>Below is my implementation of the Jacobi Method for this problem.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>JacobiSolver</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>matrixA</span>,<span class='va'>b</span>,<span class='va'>init.guess</span>,<span class='va'>tol</span>,<span class='va'>max.iter</span><span class='op'>=</span><span class='fl'>5000</span><span class='op'>)</span><span class='op'>{</span>
  <span class='co'>####################################################################</span>
  <span class='co'>##  Want to solve linear system Ax = b using iterative Jacobi method</span>
  <span class='co'>##  Input:</span>
  <span class='co'>##  init.guess = best initial guess for x</span>
  <span class='co'>##  tol = the tolerance for convergence (looking at max difference)</span>
  <span class='co'>##  max.iter = stopping condition if convergence not reached</span>
  <span class='co'>##  Output:</span>
  <span class='co'>##  solution x with information about convergence</span>
  <span class='co'>####################################################################</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/prod.html'>prod</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>matrixA</span><span class='op'>)</span><span class='op'>!=</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>==</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>{</span>
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='st'>"All diagonal elements must be non-zero"</span><span class='op'>)</span>
    <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='va'>L.plus.U</span> <span class='op'>&lt;-</span> <span class='va'>matrixA</span>
  <span class='va'>D</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>matrixA</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/diag.html'>diag</a></span><span class='op'>(</span><span class='va'>L.plus.U</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>

  <span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='va'>init.guess</span>  <span class='co'>## Initial Conditions</span>
  <span class='va'>x.ten</span> <span class='op'>&lt;-</span> <span class='va'>init.guess</span>
  <span class='va'>max.iterations</span> <span class='op'>&lt;-</span> <span class='va'>max.iter</span>
  <span class='va'>tolerance</span> <span class='op'>&lt;-</span> <span class='va'>tol</span>
  <span class='va'>count</span> <span class='op'>=</span> <span class='fl'>0</span>
  <span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>max.iterations</span><span class='op'>)</span><span class='op'>{</span>
    <span class='co'>##  Update</span>
    <span class='va'>x.new</span> <span class='op'>&lt;-</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>*</span><span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='va'>D</span><span class='op'>)</span><span class='op'>*</span><span class='va'>L.plus.U</span><span class='op'>%*%</span><span class='va'>x.old</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='va'>D</span><span class='op'>)</span><span class='op'>*</span><span class='va'>b</span>

    <span class='co'>##  Check if converging</span>
    <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span><span class='op'>%%</span><span class='fl'>10</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>{</span>
      <span class='va'>diff</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>x.new</span><span class='op'>-</span><span class='va'>x.ten</span><span class='op'>)</span>
      <span class='va'>x.ten</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span>
      <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>diff</span><span class='op'>)</span><span class='op'>&lt;</span><span class='va'>tolerance</span><span class='op'>)</span><span class='op'>{</span> <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/noquote.html'>noquote</a></span><span class='op'>(</span><span class='st'>"Converged!"</span><span class='op'>)</span><span class='op'>)</span>;<span class='kw'>break</span>;<span class='op'>}</span>
    <span class='op'>}</span>

    <span class='co'>##  Get ready for the next loop</span>
    <span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span>
    <span class='va'>count</span> <span class='op'>&lt;-</span> <span class='va'>count</span> <span class='op'>+</span><span class='fl'>1</span>
    <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>==</span> <span class='va'>max.iterations</span><span class='op'>)</span><span class='op'>{</span><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='st'>"Not-Converged"</span><span class='op'>)</span>;<span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>}</span>
  <span class='op'>}</span>
  <span class='va'>solution.Jacobi</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>x.new</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/noquote.html'>noquote</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Iterative proceedure looped"</span>,<span class='va'>count</span>,<span class='st'>"number of times."</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>solution.Jacobi</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='co'>##  Make sure it works!</span>
<span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='va'>n</span>,nrow<span class='op'>=</span><span class='fl'>500</span>,ncol<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>solution.Jacobi</span> <span class='op'>&lt;-</span> <span class='fu'>JacobiSolver</span><span class='op'>(</span><span class='va'>i.minus.pt</span>,<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>500</span><span class='op'>)</span>,<span class='va'>x.old</span>,<span class='fl'>.000001</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] Converged!
[1] Iterative proceedure looped 29 number of times.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>solution.Jacobi</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.002136784 0.235939467 0.010670053 0.005944397 0.006703392</code></pre>
</div>
<h2 id="using-a-dense-eigen-solver">Using a Dense Eigen-Solver</h2>
<p>As an eigen-problem we are trying to find the eigen-vector associated with the maximum eigenvalue 1, which is of multiplicity 1. One great way to do this in <span class="math inline">\(\mathbb{R}\)</span> is with the <em>eigen()</em> function, which implements Full Symmetric Eigen-Decomposition (tri-diagonalization + QR with implicit shift). This function finds all eigenvalues of a matrix, and on request, will find the eigenvectors as well.</p>
<p>For this problem, we know we want to find the eigenvector corresponding to the eigenvalue 1. That is, we are trying to find x such that <span class="math inline">\(P^Tx=x\)</span>. This is accomplished with the following code.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>solution</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/eigen.html'>eigen</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>P</span><span class='op'>)</span>,symmetric<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>$</span><span class='va'>vectors</span><span class='op'>[</span>,<span class='fl'>1</span>,drop<span class='op'>=</span><span class='cn'>F</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>solution</span> <span class='op'>&lt;-</span> <span class='va'>solution</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>solution</span><span class='op'>)</span>
<span class='va'>solution</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.002136784 0.235939467 0.010670053 0.005944397 0.006703392</code></pre>
</div>
<h2 id="using-a-simple-iterative-eigen-solver">Using a Simple Iterative Eigen-Solver</h2>
<p>The Power Method is a very simple algorithm for finding the maximum eigenvalue and eigenvector for a matrix. We know by the Perron-Frobenius Theorem that 1 is the largest eigenvalue, thus applying this method to <span class="math inline">\(P^T\)</span> will provide the solution to our problem.</p>
<p>My implementation of the Power Method for <span class="math inline">\(P^T\)</span> is below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>PowerMethodSolver</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>matrixA</span>,<span class='va'>init.guess</span>,<span class='va'>tol</span>,<span class='va'>max.iter</span><span class='op'>=</span><span class='fl'>5000</span><span class='op'>)</span><span class='op'>{</span>
  <span class='co'>####################################################################</span>
  <span class='co'>##  Want to find large eigenvalue and associated eigenvector</span>
  <span class='co'>##  Ax = LAMBDAx</span>
  <span class='co'>##  Input:</span>
  <span class='co'>##  init.guess = best initial guess for x</span>
  <span class='co'>##  tol = the tolerance for convergence (looking at max difference)</span>
  <span class='co'>##  max.iter = stopping condition if convergence not reached</span>
  <span class='co'>##  Output:</span>
  <span class='co'>##  solution x with information about convergence</span>
  <span class='co'>####################################################################</span>
  <span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='va'>init.guess</span>  <span class='co'>## Initial Conditions</span>
  <span class='va'>x.ten</span> <span class='op'>&lt;-</span> <span class='va'>x.old</span>
  <span class='va'>max.iterations</span> <span class='op'>&lt;-</span> <span class='va'>max.iter</span>
  <span class='va'>tolerance</span> <span class='op'>&lt;-</span> <span class='va'>tol</span>
  <span class='va'>count</span> <span class='op'>=</span> <span class='fl'>0</span>

  <span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>max.iterations</span><span class='op'>)</span><span class='op'>{</span>

    <span class='co'>##  Calculate next iteration</span>
    <span class='va'>x.new</span> <span class='op'>&lt;-</span> <span class='va'>matrixA</span><span class='op'>%*%</span><span class='va'>x.old</span>
    <span class='va'>x.new</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>x.new</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>

    <span class='co'>##  Check if converging</span>
    <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span><span class='op'>%%</span><span class='fl'>10</span> <span class='op'>==</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>{</span>
      <span class='va'>diff</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>x.new</span><span class='op'>-</span><span class='va'>x.ten</span><span class='op'>)</span>
      <span class='va'>x.ten</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span>
      <span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>diff</span><span class='op'>)</span><span class='op'>&lt;</span><span class='va'>tolerance</span><span class='op'>)</span><span class='op'>{</span> <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='st'>"Converged!"</span><span class='op'>)</span>;<span class='kw'>break</span>;<span class='op'>}</span>
    <span class='op'>}</span>

    <span class='co'>##  Update</span>
    <span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span>
    <span class='va'>count</span> <span class='op'>&lt;-</span> <span class='va'>count</span><span class='op'>+</span><span class='fl'>1</span>
    <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>==</span> <span class='va'>max.iterations</span><span class='op'>)</span><span class='op'>{</span><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='st'>"Not-Converged"</span><span class='op'>)</span>;<span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span><span class='op'>}</span>

  <span class='op'>}</span>
  <span class='va'>solution.power</span> <span class='op'>&lt;-</span> <span class='va'>x.new</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>x.new</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/noquote.html'>noquote</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Method iterated"</span>,<span class='va'>count</span>,<span class='st'>"number of times."</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>solution.power</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='co'>##  Make sure it works!</span>
<span class='va'>x.old</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>/</span><span class='va'>n</span>,nrow<span class='op'>=</span><span class='fl'>500</span>,ncol<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>  <span class='co'>## Initial Conditions</span>
<span class='va'>solution.power</span> <span class='op'>&lt;-</span> <span class='fu'>PowerMethodSolver</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>P</span><span class='op'>)</span>,<span class='va'>x.old</span>,<span class='fl'>.000001</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;Converged!&quot;
[1] Method iterated 59 number of times.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>solution.power</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>[1] 0.002136784 0.235939385 0.010670055 0.005944398 0.006703393</code></pre>
</div>
<h1 id="the-results">The Results</h1>
<p>Now that we have solved this problem in a number of different ways, we can answer the question that we set out to answer; what are the top 20 websites connected to the <a href="www.stat.ncsu.edu">www.stat.ncsu.edu</a> website?</p>
<p>We can find these websites with the highest stationary state probabilities with the following code.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>      Stationary Probabilities
 [1,] &quot;0.235939466951902&quot;     
 [2,] &quot;0.0211065334273055&quot;    
 [3,] &quot;0.0144917606322821&quot;    
 [4,] &quot;0.0140769056962011&quot;    
 [5,] &quot;0.0135504522670688&quot;    
 [6,] &quot;0.0110037883588661&quot;    
 [7,] &quot;0.010670053024285&quot;     
 [8,] &quot;0.0101356734130066&quot;    
 [9,] &quot;0.00975252510864476&quot;   
[10,] &quot;0.00823415213171245&quot;   
[11,] &quot;0.0078921509700482&quot;    
[12,] &quot;0.00731078337779315&quot;   
[13,] &quot;0.0069518473720118&quot;    
[14,] &quot;0.00687005153079194&quot;   
[15,] &quot;0.00670339199514352&quot;   
[16,] &quot;0.00623291067709522&quot;   
[17,] &quot;0.00594439722646046&quot;   
[18,] &quot;0.00547885860901607&quot;   
[19,] &quot;0.00534747062763832&quot;   
[20,] &quot;0.00521543243231812&quot;   
      Websites                                 
 [1,] &quot;http://www&quot;                             
 [2,] &quot;http://purl.org/rss/1.0/modules/content&quot;
 [3,] &quot;http://ns.adobe.com/xap/1.0&quot;            
 [4,] &quot;http://ncsu.edu&quot;                        
 [5,] &quot;http://instagram.com/ncstate&quot;           
 [6,] &quot;http://www.&quot;                            
 [7,] &quot;http://www.ncsu.edu&quot;                    
 [8,] &quot;http://purl.org/dc/elements/1.1&quot;        
 [9,] &quot;http://www.statistics2013.org&quot;          
[10,] &quot;http://drupal.org)&quot;                     
[11,] &quot;http://gmpg.org/xfn/11&quot;                 
[12,] &quot;http://ogp.me/ns&quot;                       
[13,] &quot;http://www.rsscse.org.uk&quot;               
[14,] &quot;http://purl.org/dc/terms&quot;               
[15,] &quot;http://www.lib.ncsu.edu&quot;                
[16,] &quot;http://www.flickr.com/photos/ncsu_scrc&quot; 
[17,] &quot;http://www.ncsu.edu/directory&quot;          
[18,] &quot;http://mypack.ncsu.edu&quot;                 
[19,] &quot;http://www.ncsu.edu/campus_map&quot;         
[20,] &quot;http://schema.org/Library&quot;              </code></pre>
</div>
<h2 id="extension-of-this-analysis-to-the-entire-internet">Extension of this Analysis to the Entire Internet</h2>
<p>The internet today contains some 43.5 Billion webpages. To solve the Page Rank problem with today’s computational power is really only possible using iterative methods that can make use of "warm starts", where solutions from previous days runs can be used as good starting values, significantly reducing the necessary number of iterations for convergence.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
